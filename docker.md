[Заглавная](README.md)

# Docker

+ [Intro](#Intro)

## Intro

[hostname][:post][/username/]<imagename>[:tag] - где хранится образ

Cписок зарегистрированных образов
```
docker images
```
Запуск контейнера
```
docker run -it ubuntu // -it контейнер в интерактивном режиме в текущем терминале //
docker run --rm ubuntu cat /etc/os-release // выполнит команду cat  внутри контейнера? а затем -rm уничтожит этот контейнер после выполнения команды
docker run -d --name %somename% -p 8080:80 %ubuntu% // запуск в демонизированном виде, чтобы знать какой контейнер запущен. 8080 порт контейнера снаружи, 80 порт который транслируется наружу
```
Список контейнеров
```
docker ps // список запущенных контейнеров
docker ps -a // покажет все контейнеры, даже остановленные
```
Удалить контейнер
```
docker rm -f %id container% // -f force сработает даже для запущенных контейнеров
docker rm -f $(docker ps -aq) // удалить все контейнеры, даже запущенные, а на вход в команду принять результат команды вывода всего списка id контейнеров
```
Лог контейнера
```
docker logs %id container%
docker logs -t %id container% // c таймкодом
docker logs -tf %id container% // следит за логом, а не просто выводит его std.out. ctrl+c - выйти из слежки
```
```
docker attach %id контейнера%  // подключиться к запущенному контейнеру
docker start %id контекнера%  // запуск остановленного контекнера
docker diff %id container% //  содержимое read/write слоя
docker restart %id container% // перезапуск контейнера и его процессов
docker commit %id container% test:1 // сохранит образ текущего контейнера и даст ему имя test и тэг 1. Это неправильно
docker build -t py . // собрать образ в директории "." и назвать "py"
docker tag py my_py // Даёт образу новый тэг
```
```
FROM python               // исходный образ c встроенным python
WORKDIR /app              // объявление рабочей директории
RUN pip install flask     // запуск команды в контейнере по установке пакета flask
ADD app.py /app/app.py    // копирует файл из родительской системы в образ
EXPOSE 80                 // проверяет порт, можно упустить
CMD ["python","app.py"]   // запуск приложения app.py в контейнере
```

ctrl+d // выйти из интерактивного режима образа
ctrl+p а далее ctrl+q // отключиться и оставить запущенным

[к оглавлению](#Intro)

[Заглавная](README.md)